!function(){angular.module("keratin",["ngRoute","ngResource"]).config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"template/home.html",controller:""}).when("/delivery",{templateUrl:"template/delivery.html",controller:""}).when("/product/:productId",{templateUrl:"template/detail.html",controller:"ProductDetailController"}).otherwise({redirectTo:"/"})}]).controller("ProductListController",["$scope","$http",function(t,e){e.get("/products.json").success(function(e){t.products=e}).error(function(t){})}]).controller("ProductDetailController",["$scope","$http","$routeParams",function(t,e,o){t.productId=o.productId,t.error=null,isNaN(t.productId)||+t.productId<0?t.error=!0:e.get("/products.json").success(function(e){+t.productId>=e.length?t.error=!0:t.product=e[t.productId],console.log(t.product.length,t.error)}).error(function(t){})}]);var t=function(){var t=document.querySelector(".burger"),e=document.querySelector(".menu"),o=document.querySelector(".menu__list"),r=document.querySelector(".menu__brand"),n=document.querySelectorAll(".menu__item"),l=!1,a=function(){if(l){e.classList.remove("menu--active"),o.classList.remove("menu__list--active"),r.classList.remove("menu__brand--active"),t.classList.remove("burger--close");for(var a=0,c=n.length;c>a;a++)n[a].classList.remove("menu__item--active");l=!1}else{e.classList.add("menu--active"),o.classList.add("menu__list--active"),r.classList.add("menu__brand--active"),t.classList.add("burger--close");for(var a=0,c=n.length;c>a;a++)n[a].classList.add("menu__item--active");l=!0}},c=function(){t.addEventListener("click",a,!1),$(".menu__item").on("click",a)},i=function(){c()};return{init:i}}();t.init(),$(document).ready(function(){var t=$("button[type=submit]"),e=$("#contact"),o=$(".contact-title"),r=($("#contactModal"),$(".alert-danger")),n=function(){var t=$(".alert-danger");t.length&&t.alert("close")},l=function(r){t.button("reset"),yaCounter33794384.reachGoal("sendData"),n(),o.html("Спасибо, заявка отправлена"),e.before('<div class="alert alert-success" role="alert"><strong>Мы свяжемся с Вами в ближайшее время.</strong></div>'),e.css("display","none")},a=function(o){t.button("reset"),r.length&&r.alert("close"),t.button("reset"),e.before('<div class="alert alert-danger" role="alert"><strong>Произошла ошибка! Пожалуйста, повторите попытку.</strong></div>')};e.on("submit",function(o){return t.button("loading"),o.preventDefault(),n(),document.all&&!window.atob&&0==$("#inputTel").val().length?(e.before('<div class="alert alert-danger" role="alert"><strong>Поле телефон обязательно для заполнения!</strong></div>'),void t.button("reset")):void $.ajax({url:"/mail",method:"post",data:{name:$("#inputName").val(),email:$("#inputEmail").val(),tel:$("#inputTel").val(),comment:$("#inputComment").val()},success:l,error:a})}),document.all&&!window.atob&&($('label[for="inputComment"]').html("Комментарий:"),$('label[for="inputName"]').html("Имя:"),$('label[for="inputEmail"]').html("Email:"),$('label[for="inputTel"]').html("Телефон*:"))});var e;DG.then(function(){e=DG.map("map",{center:[59.865962,30.380942],zoom:15,scrollWheelZoom:!1}),DG.control.location({position:"bottomright"}).addTo(e),DG.control.traffic().addTo(e),DG.marker([59.865962,30.380942]).addTo(e).bindPopup("Самовывоз: г.Санкт-Петербург, метро Международная, Турку 11к2 ")})}();