!function(){angular.module("keratin",["ngRoute","ngResource"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"template/home.html",controller:""}).when("/delivery",{templateUrl:"template/delivery.html",controller:""}).when("/product/:productId",{templateUrl:"template/detail.html",controller:"ProductDetailController"}).otherwise({redirectTo:"/"})}]).controller("ProductListController",["$scope","$http",function(e,t){t.get("/products.json").success(function(t){e.products=t}).error(function(e){})}]).controller("ProductDetailController",["$scope","$http","$routeParams",function(e,t,r){e.productId=r.productId,e.error=null,isNaN(e.productId)||+e.productId<0?e.error=!0:t.get("/products.json").success(function(t){+e.productId>=t.length?e.error=!0:e.product=t[e.productId],console.log(e.product.length,e.error)}).error(function(e){})}]);var e=function(){var e=document.querySelector(".burger"),t=document.querySelector(".menu"),r=document.querySelector(".menu__list"),o=document.querySelector(".menu__brand"),n=document.querySelectorAll(".menu__item"),l=!1,a=function(){if(l){t.classList.remove("menu--active"),r.classList.remove("menu__list--active"),o.classList.remove("menu__brand--active"),e.classList.remove("burger--close");for(var a=0,c=n.length;c>a;a++)n[a].classList.remove("menu__item--active");l=!1}else{t.classList.add("menu--active"),r.classList.add("menu__list--active"),o.classList.add("menu__brand--active"),e.classList.add("burger--close");for(var a=0,c=n.length;c>a;a++)n[a].classList.add("menu__item--active");l=!0}},c=function(){e.addEventListener("click",a,!1)},u=function(){c()};return{init:u}}();e.init(),$(document).ready(function(){var e=$("button[type=submit]"),t=$("#contact"),r=$(".contact-title"),o=($("#contactModal"),$(".alert-danger")),n=function(){var e=$(".alert-danger");e.length&&e.alert("close")},l=function(o){e.button("reset"),yaCounter33794384.reachGoal("sendData"),n(),r.html("Спасибо, заявка отправлена"),t.before('<div class="alert alert-success" role="alert"><strong>Мы свяжемся с Вами в ближайшее время.</strong></div>'),t.css("display","none")},a=function(r){e.button("reset"),o.length&&o.alert("close"),e.button("reset"),t.before('<div class="alert alert-danger" role="alert"><strong>Произошла ошибка! Пожалуйста, повторите попытку.</strong></div>')};t.on("submit",function(r){return e.button("loading"),r.preventDefault(),n(),document.all&&!window.atob&&0==$("#inputTel").val().length?(t.before('<div class="alert alert-danger" role="alert"><strong>Поле телефон обязательно для заполнения!</strong></div>'),void e.button("reset")):void $.ajax({url:"/mail",method:"post",data:{name:$("#inputName").val(),email:$("#inputEmail").val(),tel:$("#inputTel").val(),comment:$("#inputComment").val()},success:l,error:a})}),document.all&&!window.atob&&($('label[for="inputComment"]').html("Комментарий:"),$('label[for="inputName"]').html("Имя:"),$('label[for="inputEmail"]').html("Email:"),$('label[for="inputTel"]').html("Телефон*:"))})}();